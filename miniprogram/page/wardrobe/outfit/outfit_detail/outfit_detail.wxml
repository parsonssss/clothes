<view class="container" style="background-color: {{themeStyle === 'autumn' ? colors.golden_batter : pinkBlueColors.pinkLight}};">
  <!-- Loading state -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <view class="loading-spinner" style="border-top-color: {{colors.cowhide_cocoa}}; border-color: {{colors.golden_batter}};"></view>
    <view class="loading-text" style="color: {{colors.cowhide_cocoa}};">åŠ è½½ä¸­...</view>
  </view>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="main-content" wx:if="{{!isLoading && outfitData}}">
    <!-- é¡¶éƒ¨åŒºåŸŸ -->
    <view class="top-section">
      <view class="back-button" bindtap="goBack">
        <view class="back-icon" style="border-right-color: {{colors.cowhide_cocoa}};"></view>
        <text style="color: {{colors.cowhide_cocoa}};">è¿”å›</text>
      </view>
      
      <view class="outfit-title" style="color: {{colors.cowhide_cocoa}};">{{outfitData.name || 'æœªå‘½åæ­é…'}}</view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="action-buttons">
        <view class="edit-button" bindtap="editOutfit" style="background-color: {{colors.olive_harvest}}; color: {{colors.golden_batter}};">
          <text>ç¼–è¾‘</text>
        </view>
        <view class="delete-button" bindtap="deleteOutfit" style="background-color: {{colors.spiced_wine}}; color: {{colors.golden_batter}};">
          <text>åˆ é™¤</text>
        </view>
      </view>
    </view>
    
    <!-- æ­é…è¯¦æƒ…å¡ç‰‡ -->
    <view class="outfit-detail-card" style="background-color: {{colors.toasted_caramel}};">
      <!-- æ­é…é¢„è§ˆå›¾ -->
      <view class="outfit-preview">
        <image 
          src="{{outfitData.previewImage}}" 
          mode="aspectFill" 
          class="preview-image"
          style="border: 2rpx solid {{colors.golden_batter}};"
          binderror="handleImageError"
          data-type="preview"
        ></image>
      </view>
      
      <!-- æ­é…ä¿¡æ¯ -->
      <view class="outfit-info">
        <view class="info-row">
          <view class="info-label" style="color: {{colors.golden_batter}};">åˆ›å»ºæ—¶é—´ï¼š</view>
          <view class="info-value" style="color: {{colors.golden_batter}};">{{outfitData.createTimeFormatted || 'æœªçŸ¥'}}</view>
        </view>
        
        <view class="info-row">
          <view class="info-label" style="color: {{colors.golden_batter}};">ç±»åˆ«ï¼š</view>
          <view class="info-value" style="color: {{colors.golden_batter}};">
            <text wx:if="{{outfitData.category === 'daily'}}">æ—¥å¸¸ç©¿æ­</text>
            <text wx:elif="{{outfitData.category === 'work'}}">èŒä¸šç©¿æ­</text>
            <text wx:elif="{{outfitData.category === 'party'}}">æ´¾å¯¹ç©¿æ­</text>
            <text wx:elif="{{outfitData.category === 'sport'}}">è¿åŠ¨ç©¿æ­</text>
            <text wx:elif="{{outfitData.category === 'seasonal'}}">å­£èŠ‚ç©¿æ­</text>
            <text wx:else>{{outfitData.category || 'å…¶ä»–'}}</text>
          </view>
        </view>
        
        <view class="info-row" wx:if="{{outfitData.description}}">
          <view class="info-label" style="color: {{colors.golden_batter}};">æè¿°ï¼š</view>
          <view class="info-value" style="color: {{colors.golden_batter}};">{{outfitData.description}}</view>
        </view>
        
        <!-- æ ‡ç­¾ -->
        <view class="tags-container" wx:if="{{outfitData.tags && outfitData.tags.length > 0}}">
          <view class="info-label" style="color: {{colors.golden_batter}};">æ ‡ç­¾ï¼š</view>
          <view class="tags-list">
            <block wx:for="{{outfitData.tags}}" wx:key="*this">
              <view class="tag" style="background-color: {{colors.olive_harvest}}; color: {{colors.golden_batter}};">
                {{item}}
              </view>
            </block>
          </view>
        </view>
      </view>
    </view>
    
    <!-- æ­é…ç»„æˆéƒ¨åˆ† -->
    <view class="outfit-items-section" wx:if="{{outfitData.items && outfitData.items.length > 0}}">
      <view class="section-title" style="color: {{colors.cowhide_cocoa}};">æ­é…ç»„æˆ</view>
      
      <view class="outfit-items-grid">
        <block wx:for="{{outfitData.items}}" wx:key="id">
          <view class="outfit-item-card" style="background-color: {{colors.olive_harvest}};">
            <image 
              src="{{item.imageUrl}}" 
              mode="aspectFit" 
              class="item-image"
              style="border: 2rpx solid {{colors.golden_batter}};"
              binderror="handleImageError"
              data-type="item"
              data-index="{{index}}"
            ></image>
            <view class="item-info">
              <view class="item-name" style="color: {{colors.golden_batter}};">{{item.name || 'æœªå‘½å'}}</view>
              <view class="item-type" style="color: {{colors.golden_batter}};">
                <text wx:if="{{item.type === 'top'}}">ä¸Šè¡£</text>
                <text wx:elif="{{item.type === 'bottom'}}">è£¤å­</text>
                <text wx:elif="{{item.type === 'outerwear'}}">å¤–å¥—</text>
                <text wx:elif="{{item.type === 'shoes'}}">é‹å­</text>
                <text wx:elif="{{item.type === 'accessory'}}">é…é¥°</text>
                <text wx:else>{{item.type || item.category || 'æœªåˆ†ç±»'}}</text>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>
    
    <!-- ç›¸ä¼¼æ­é…æ¨è -->
    <view class="similar-outfits-section" wx:if="{{similarOutfits.length > 0}}">
      <view class="section-title" style="color: {{colors.cowhide_cocoa}};">ç›¸ä¼¼æ­é…æ¨è</view>
      
      <scroll-view scroll-x="true" class="similar-outfits-scroll">
        <block wx:for="{{similarOutfits}}" wx:key="id">
          <view class="similar-outfit-card" bindtap="viewSimilarOutfit" data-id="{{item.id || item._id}}" style="background-color: {{colors.spiced_wine}};">
            <image 
              src="{{item.previewImage}}" 
              mode="aspectFill" 
              class="similar-outfit-image"
              style="border: 2rpx solid {{colors.golden_batter}};"
              binderror="handleImageError"
              data-type="similar"
              data-index="{{index}}"
            ></image>
            <view class="similar-outfit-name" style="color: {{colors.golden_batter}};">{{item.name || 'æœªå‘½åæ­é…'}}</view>
            <view class="similar-outfit-date" style="color: {{colors.golden_batter}};">{{item.createTimeFormatted || 'æœªçŸ¥æ—¥æœŸ'}}</view>
          </view>
        </block>
      </scroll-view>
    </view>
    
    <!-- æ— æ•°æ®æç¤º -->
    <view class="no-data-container" wx:if="{{!isLoading && !outfitData}}">
      <view class="no-data-icon">ğŸ§¥</view>
      <view class="no-data-text" style="color: {{colors.cowhide_cocoa}};">æœªæ‰¾åˆ°æ­é…æ•°æ®</view>
      <view class="no-data-subtext" style="color: {{colors.cowhide_cocoa}};">è¯·è¿”å›é‡æ–°é€‰æ‹©</view>
    </view>
  </view>
</view> 